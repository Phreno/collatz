#!/usr/bin/env coffee

# Développeur ....: K3rn€l_P4n1K
# Nom ............: collatz
# Description ....: applique sur un nombre l'hypothèse de collatz
# Version ........: 1.0
# Date ...........: dimanche 16 avril 2017, 15:08:46 (UTC+0200)
# Dépendances ....: CoffeeScript version 1.10.0

# Fonctionnalité .: boucle jusqu'à tomber sur un nombre déjà rencontré
# Intention ......: voir les étapes appliquées sur des nombres premiers
# Remarque .......: N/A

# ===========================
# Copyright 2017 K3rn€l P4n1k
# ===========================
#
# collatz is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# collatz is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with collatz. If not, see <http://www.gnu.org/licenses/>.

CONFIG=
  maxSteps: 1000000
  slope:3
  intercept:1
  divider:2

collatz = (input)->
  number=input
  result=[]
  while result.indexOf(number) is -1
    result.push number
    if number % CONFIG.divider is 0 then number /= CONFIG.divider
    else number = CONFIG.slope * number + CONFIG.intercept
    if result.length > CONFIG.maxSteps
      console.log "/!\\ #{CONFIG.maxSteps}+ steps"
      number="[#{CONFIG.maxSteps}+]"
      break
  result.push "##{number}"
  console.log(result.join ";")

collatz process.argv[2]
